<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>How to make a video of a sequence of FEM functions? - FEniCS Q&amp;A</title>
		<meta name="description" content='Starting with from dolfin import * mesh = UnitSquareMesh(nx, ny) V = FunctionSpace(mesh, "CG ... , but any suggested solutions would be welcome!)'>
		<meta name="keywords" content="visualization,storage">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/7390/how-to-make-a-video-of-a-sequence-of-fem-functions">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">How to make a video of a sequence of FEM functions?</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q7390">
								<form method="post" action="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_7390">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516468117-cf79d593407c146ae2c680fae5861d370a3bb533">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions">
										<div class="qa-q-view-content">
											<a name="7390"></a><div class="entry-content"><p>Starting with</p>

<pre><code>from dolfin import *
mesh = UnitSquareMesh(nx, ny)
V = FunctionSpace(mesh, "CG", 1)
</code></pre>

<p>I do some processing and obtain a list <code>u</code> of length <code>20</code> (where each member of this list is an object of class <code>Function(V)</code> and has been obtained as the solution to a certain boundary-value problem on <code>mesh</code>).</p>

<p>I would like to make an animation which:</p>

<ol>
<li>plots (a 2-dimensional view of) <code>u[0]</code></li>
<li>holds for 0.5 seconds</li>
<li>hides <code>u[0]</code> and plots (a 2-dimensional view of) <code>u[1]</code></li>
<li>holds for 0.5 seconds</li>
<li>etc.</li>
</ol>

<p>I have tried using the plot command inside a loop, but then I have to indivually close each window by hand and each new plot pops up at a different location on the screen.</p>

<p>Instead, I would like to produce an animation in one window only; also, I would like to store this animation for later use. Could someone propose a way of accomplishing these tasks? (I would prefer a solution that does not require any external software, but any suggested solutions would be welcome!)</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/visualization" rel="tag" class="qa-tag-link">visualization</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/storage" rel="tag" class="qa-tag-link">storage</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2015-06-11T14:22:30+0000"></span>Jun 11, 2015</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/kdma-at-dtu" class="qa-user-link url nickname">kdma-at-dtu</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">590</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" id="c7390_list">
											<div class="qa-c-list-item  hentry comment" id="c7392">
												<div class="qa-c-item-content">
													<a name="7392"></a><div class="entry-content"><p>Hi!</p>

<p>Concerning the multiple windows issue, you can use the plot command 'key' argument like this:</p>

<pre><code>plot(u[0], key='u0')
</code></pre>

<p>If you put it inside a loop you'll see the succession of plots of u[0] in a single window. Then to create the animation I'm afraid I can't help you but if you can time it correctly you may be able to record it thanks to some software recording the display from the gpu of the computer... Still, there must be some way of doing it with a Python code but I don't know how.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-meta">
															<a href="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions?show=7392#c7392" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-06-11T15:01:15+0000"></span>Jun 11, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/MathieuFV" class="qa-user-link url nickname">MathieuFV</a></span></span>
																<span class="qa-c-item-who-title">FEniCS User</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">1,490</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516468117-20e3e73792a1225e6b664a14f7b5e899aadc8575">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a7394">
									<form method="post" action="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions">
										<div class="qa-voting qa-voting-net" id="voting_7394">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468117-cf79d593407c146ae2c680fae5861d370a3bb533">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="7394"></a><div class="entry-content"><p>Hi,</p>

<p>You can export your solution in Paraview</p>

<pre><code>fid = File("solution.pvd")
for i in range(0, ntimesteps):
     t = i *dt
     # compute u at time t by solving the PDE
     u.rename("u", "u") #see the QA reported below.
     fid &lt;&lt; u, t
</code></pre>

<p>Then creating the video in paraview is very easy.</p>

<p><a rel="nofollow" href="https://www.youtube.com/watch?v=NFnw1AGoh_s">https://www.youtube.com/watch?v=NFnw1AGoh_s</a></p>

<p>Also, look at this QA for some issues regarding exporting in paraview:<br>
<a rel="nofollow" href="http://fenicsproject.org/qa/7334/bug-in-how-vtk-files-are-written-in-fenics-1-5-0?show=7334#q7334">http://fenicsproject.org/qa/7334/bug-in-how-vtk-files-are-written-in-fenics-1-5-0?show=7334#q7334</a></p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-meta">
													<a href="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions?show=7394#a7394" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2015-06-11T15:49:59+0000"></span>Jun 11, 2015</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/umberto" class="qa-user-link url nickname">umberto</a></span></span>
														<span class="qa-a-item-who-title">FEniCS User</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">6,440</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c7394_list">
												<div class="qa-c-list-item  hentry comment" id="c7400">
													<div class="qa-c-item-content">
														<a name="7400"></a><div class="entry-content"><p>@umberto: Thanks for the suggestion.</p>

<p>Because I store my data in a list <code>u</code> of length 20, I tried out the following modification of your code:</p>

<pre><code>fid = File("solution.pvd")

for i in range(0, 20):
    u[i].rename("u[i]", "u[i]")
    fid &lt;&lt; u[i], i
</code></pre>

<p>Then, upon opening solution.pvd in Paraview, I clicked "Apply" and then "Play" which produced a movie as desired.</p>

<p>However, since <a rel="nofollow" href="https://www.youtube.com/watch?v=NFnw1AGoh_s">https://www.youtube.com/watch?v=NFnw1AGoh_s</a> makes an animation of a 3D object and since my goal was to make a frame-by-frame animation of a 2D object, I modified your code rather blindly...</p>

<p>In particular, even though I got the desired result, I don't quite understand what purpose the renaming serves and how it should be best done - could you kindly advise me about that?</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions?show=7400#c7400" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-06-12T16:17:36+0000"></span>Jun 12, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/kdma-at-dtu" class="qa-user-link url nickname">kdma-at-dtu</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">590</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c7405">
													<div class="qa-c-item-content">
														<a name="7405"></a><div class="entry-content"><p>Because you may be creating a new Function object on each timestep, they will be given different names by dolfin, and saved as different time series. For the data to appear in the same time series, they must have the same 'name'.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions?show=7405#c7405" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-06-13T19:21:50+0000"></span>Jun 13, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Expert</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c7484">
													<div class="qa-c-item-content">
														<a name="7484"></a><div class="entry-content"><p>@chris_richardson: Thanks for your comment.</p>

<p>I also came across <a rel="nofollow" href="http://fenicsproject.org/qa/1382/how-to-name-the-variables-when-writing-to-vtk-file">http://fenicsproject.org/qa/1382/how-to-name-the-variables-when-writing-to-vtk-file</a> and it appears that, if I change the code from my post on June 12 by replacing</p>

<pre><code>u[i].rename("u[i]", "u[i]")
</code></pre>

<p>with</p>

<pre><code>u[i].rename("something", "label")
</code></pre>

<p>then, upon opening <code>fid</code> in ParaView, "something" is the name for my time series displayed by ParaView.</p>

<p>May I ask what the purpose of "label" is? (I couldn't quite gather that from <a rel="nofollow" href="http://fenicsproject.org/qa/1382/how-to-name-the-variables-when-writing-to-vtk-file.)">http://fenicsproject.org/qa/1382/how-to-name-the-variables-when-writing-to-vtk-file.)</a></p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../7390/how-to-make-a-video-of-a-sequence-of-fem-functions?show=7484#c7484" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-06-25T10:00:05+0000"></span>Jun 25, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/kdma-at-dtu" class="qa-user-link url nickname">kdma-at-dtu</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">590</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468117-a88bfe65d40fc9125c06f6cd2605017fc11b84e4">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>