<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>segfault of Function's assignment operator - FEniCS Q&amp;A</title>
		<meta name="description" content="Hi everyone, I am trying to write a procedure that accepts reference to function $$ u\in V, $$ then inside some  ...  V(mesh); Function v(V); u = v; }">
		<meta name="keywords" content="function,assignment">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/1103/segfault-of-functions-assignment-operator">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">segfault of Function's assignment operator</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q1103">
								<form method="post" action="../../1103/segfault-of-functions-assignment-operator">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_1103">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+3<span class="votes-up"><span class="value-title" title="3"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467089-99fe923c3cea27785babd583d58a52cfc5d0885f">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../1103/segfault-of-functions-assignment-operator">
										<div class="qa-q-view-content">
											<a name="1103"></a><div class="entry-content"><p>Hi everyone,</p>

<p>I am trying to write a procedure that accepts reference to function $$ u\in V, $$ then inside some computations are made whose result is a function $$ v \in W $$ that I planned to return by assigning u = v. However I get segmentation faults if I try to work with u (plot,<br>
calling its methods) after the function() call even if $$ V = W. $$ Can anyone point out<br>
what the problem might be? Thanks.  </p>

<pre><code>#include "cG1.h" // element = FiniteElement("Lagrange", triangle, 1)
#include &lt;dolfin.h&gt;

using namespace dolfin;

void function(Function&amp; u);

int main()
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  Function u(V);

  function(u);
  dolfin::info("%d", u.function_space()-&gt;dim()); 

  return 0;
}

void function(Function&amp; u)
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  Function v(V);

  u = v;
}
</code></pre>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/function" rel="tag" class="qa-tag-link">function</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/assignment" rel="tag" class="qa-tag-link">assignment</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-avatar">
												<a href="../../user/MiroK" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/f566be3274ec73e3a6dda27bca11631c?s=50" width="50" height="50" class="qa-avatar-image" alt=""></a>
											</span>
											<span class="qa-q-view-meta">
												<a href="../../1103/segfault-of-functions-assignment-operator" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2013-09-04T20:51:39+0000"></span>Sep 4, 2013</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Expert</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">80,920</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
												<br>
												<span class="qa-q-view-what">edited</span>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="updated"><span class="value-title" title="2013-09-05T08:32:14+0000"></span>Sep 5, 2013</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span><span class="qa-q-view-who-data"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" id="c1103_list">
											<div class="qa-c-list-item  hentry comment" id="c1106">
												<div class="qa-c-item-content">
													<a name="1106"></a><div class="entry-content"><p>Please, report also version of FEniCS and used linear algebra backend.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/Jan+Blechta" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/dc6f8dce77e4a0bd5adc7ff31ab83741?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../1103/segfault-of-functions-assignment-operator?show=1106#c1106" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2013-09-04T21:01:01+0000"></span>Sep 4, 2013</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Jan+Blechta" class="qa-user-link url nickname">Jan Blechta</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">51,420</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c1108">
												<div class="qa-c-item-content">
													<a name="1108"></a><div class="entry-content"><p>I can reproduce it in development version. However <code>shared_ptr</code> version of the code works.</p>

<pre><code>#include "cG1.h" // element = FiniteElement("Lagrange", triangle, 1)
#include &lt;dolfin.h&gt;

using namespace dolfin;

void function(boost::shared_ptr&lt;Function&gt; u);

int main()
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  boost::shared_ptr&lt;Function&gt; u(new Function(V));

  function(u);
  dolfin::info("%d", u-&gt;function_space()-&gt;dim());

  return 0;
}

void function(boost::shared_ptr&lt;Function&gt; u)
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  boost::shared_ptr&lt;Function&gt; v(new Function(V));

  u = v;
}
</code></pre>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/Jan+Blechta" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/dc6f8dce77e4a0bd5adc7ff31ab83741?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../1103/segfault-of-functions-assignment-operator?show=1108#c1108" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2013-09-04T21:17:18+0000"></span>Sep 4, 2013</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Jan+Blechta" class="qa-user-link url nickname">Jan Blechta</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">51,420</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c1111">
												<div class="qa-c-item-content">
													<a name="1111"></a><div class="entry-content"><p>I am using 1.2.0+ and PETSc.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/MiroK" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/f566be3274ec73e3a6dda27bca11631c?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../1103/segfault-of-functions-assignment-operator?show=1111#c1111" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2013-09-05T06:24:09+0000"></span>Sep 5, 2013</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">80,920</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
															<br>
															<span class="qa-c-item-what">edited</span>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="updated"><span class="value-title" title="2013-09-05T07:51:33+0000"></span>Sep 5, 2013</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span><span class="qa-c-item-who-data"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c1112">
												<div class="qa-c-item-content">
													<a name="1112"></a><div class="entry-content"><p>Thanks for suggestion. The code now works in a sense that it does not crash, but unfortunately does not do what I'd like to see. Consider the following example:</p>

<pre><code>#include "cG1.h" // element = FiniteElement("Lagrange", triangle, 1)
#include &lt;dolfin.h&gt;

using namespace dolfin;

void function(boost::shared_ptr&lt;Function&gt; u);

int main()
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  boost::shared_ptr&lt;Function&gt; u( new Function(V));

  dolfin::info("%d", u-&gt;function_space()-&gt;dim()); 
  function(u);
  dolfin::info("%d", u-&gt;function_space()-&gt;dim()); 

  return 0;
}

void function(boost::shared_ptr&lt;Function&gt; u)
{
  UnitSquareMesh mesh(20, 20);
  cG1::FunctionSpace V(mesh);
  boost::shared_ptr&lt;Function&gt; v(new Function(V));
  dolfin::info("%d", v-&gt;function_space()-&gt;dim()); 

  u = v;
}
</code></pre>

<p>After the function() call <strong>u</strong> gives dimension of the "outside" <strong>V</strong> and not the inside one as<br>
intended. </p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/MiroK" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/f566be3274ec73e3a6dda27bca11631c?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../1103/segfault-of-functions-assignment-operator?show=1112#c1112" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2013-09-05T06:30:53+0000"></span>Sep 5, 2013</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">80,920</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467089-ae847d4b097ad05bf3a6d1edc50d6a654206cdc8">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">2 Answers</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer answer-selected qa-a-list-item-selected" id="a1113">
									<form method="post" action="../../1103/segfault-of-functions-assignment-operator">
										<div class="qa-voting qa-voting-net" id="voting_1113">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+2<span class="votes-up"><span class="value-title" title="2"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516467089-99fe923c3cea27785babd583d58a52cfc5d0885f">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../1103/segfault-of-functions-assignment-operator">
											<div class="qa-a-item-selected">
												<div class="qa-a-selection">
													<div class="qa-a-selected">&#160;</div>
													<div class="qa-a-selected-text">Best answer</div>
												</div>
												<div class="qa-a-item-content">
													<a name="1113"></a><div class="entry-content"><p>Hi,</p>

<p>I think the problem is, as already pointed out, the scope and I think, as already pointed out, that it can be solved using shared pointers. However, use it for the FunctionSpace created inside the function and not for the Function itself. Perhaps you should use a shared pointer for the mesh created inside the function as well, but this seems to work:</p>

<pre><code>#include "cG1.h" // element = FiniteElement("Lagrange", triangle, 1)
#include &lt;dolfin.h&gt;

using namespace dolfin;

void function(Function&amp; u);

int main()
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  Function u(V);

  dolfin::info("%d", u.function_space()-&gt;dim()); 
  function(u);
  dolfin::info("%d", u.function_space()-&gt;dim()); 

  return 0;
}

void function(Function&amp; u)
{
  UnitSquareMesh mesh(20, 20);
  //cG1::FunctionSpace V(mesh);  
  boost::shared_ptr&lt;cG1::FunctionSpace&gt; V( new cG1::FunctionSpace(mesh));

  Function v(V);
  dolfin::info("%d", v.function_space()-&gt;dim()); 

  u = v;
}
</code></pre>
</div>
												</div>
												<span class="qa-a-item-avatar-meta">
													<span class="qa-a-item-avatar">
														<a href="../../user/mikael-mortensen" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d5614112a2818f1800a461e49ac229df?s=40" width="40" height="40" class="qa-avatar-image" alt=""></a>
													</span>
													<span class="qa-a-item-meta">
														<a href="../../1103/segfault-of-functions-assignment-operator?show=1113#a1113" class="qa-a-item-what">answered</a>
														<span class="qa-a-item-when">
															<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2013-09-05T07:21:13+0000"></span>Sep 5, 2013</span></span>
														</span>
														<span class="qa-a-item-who">
															<span class="qa-a-item-who-pad">by </span>
															<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/mikael-mortensen" class="qa-user-link url nickname">mikael-mortensen</a></span></span>
															<span class="qa-a-item-who-title">FEniCS Expert</span>
															<span class="qa-a-item-who-points">
																<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">29,340</span><span class="qa-a-item-who-points-pad"> points)</span>
															</span>
														</span>
														<br>
														<span class="qa-a-item-what">selected</span>
														<span class="qa-a-item-when">
															<span class="qa-a-item-when-data"><span class="updated"><span class="value-title" title="2013-09-05T07:58:25+0000"></span>Sep 5, 2013</span></span>
														</span>
														<span class="qa-a-item-who">
															<span class="qa-a-item-who-pad">by </span><span class="qa-a-item-who-data"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span>
														</span>
													</span>
												</span>
											</div>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c1113_list">
												<div class="qa-c-list-item  hentry comment" id="c1114">
													<div class="qa-c-item-content">
														<a name="1114"></a><div class="entry-content"><p>Hi Mikael, shared_ptr to the FunctionSpace does the trick. Thanks! Just for completeness,<br>
inside function() shared_ptr to Mesh is not needed in the above example. However, it is<br>
probably a good idea to use since without it attempt to plot(<strong>u</strong>) after the function() call<br>
causes crash. Here's an example:</p>

<pre><code>#include "cG1.h" // element = FiniteElement("Lagrange", triangle, 1)
#include &lt;dolfin.h&gt;

using namespace dolfin;

void function(Function&amp; u);

int main()
{
  UnitSquareMesh mesh(10, 10);
  cG1::FunctionSpace V(mesh);
  Function u(V);

  function(u);
  plot(u);
  interactive(true);

  return 0;
}

void function(Function&amp; u)
{
  boost::shared_ptr&lt;Mesh&gt; mesh (new UnitSquareMesh(100, 100));
  //UnitSquareMesh mesh(100, 100); // crash!
  boost::shared_ptr&lt;FunctionSpace&gt; V(new cG1::FunctionSpace(mesh));
  Function v(V);
  u = v;
}
</code></pre>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/MiroK" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/f566be3274ec73e3a6dda27bca11631c?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../1103/segfault-of-functions-assignment-operator?show=1114#c1114" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2013-09-05T07:58:22+0000"></span>Sep 5, 2013</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Expert</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">80,920</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
																<br>
																<span class="qa-c-item-what">edited</span>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="updated"><span class="value-title" title="2013-09-05T08:31:16+0000"></span>Sep 5, 2013</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span><span class="qa-c-item-who-data"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516467089-1e32a5581a71f0f3b4d71bba6ea603dc3a555df2">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
								<div class="qa-a-list-item  hentry answer" id="a1110">
									<form method="post" action="../../1103/segfault-of-functions-assignment-operator">
										<div class="qa-voting qa-voting-net" id="voting_1110">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+4<span class="votes-up"><span class="value-title" title="4"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516467089-99fe923c3cea27785babd583d58a52cfc5d0885f">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../1103/segfault-of-functions-assignment-operator">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="1110"></a><div class="entry-content"><p>I think the issue is that of scope, you construct mesh, V, and v in the function.  Once the function returns, those are no longer in scope.  Since u=v, u has now been disposed.  This is also why the shared pointer works.</p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-avatar">
													<a href="../../user/Charles" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/22e56480a5d5f76ee11abebe5dc8d5a6?s=40" width="40" height="40" class="qa-avatar-image" alt=""></a>
												</span>
												<span class="qa-a-item-meta">
													<a href="../../1103/segfault-of-functions-assignment-operator?show=1110#a1110" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2013-09-04T22:05:51+0000"></span>Sep 5, 2013</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/Charles" class="qa-user-link url nickname">Charles</a></span></span>
														<span class="qa-a-item-who-title">FEniCS User</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">4,220</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" style="display:none;" id="c1110_list">
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516467089-649d663f4a44ffd09fbe8303984a21a931bc1d1c">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>