<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Problem to use PyTrilinos - FEniCS Q&amp;A</title>
		<meta name="description" content="I am trying to use run the tutorial with [preconditioners][1] and is  ... org/documentation/tutorial/misc.html#linear-solvers-and-preconditioners">
		<meta name="keywords" content="pytrilinos,tutorial">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/3911/problem-to-use-pytrilinos">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Problem to use PyTrilinos</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q3911">
								<form method="post" action="../../3911/problem-to-use-pytrilinos">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_3911">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467992-03dd85eb82cdc9a0721c81c3568908c318b119b7">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../3911/problem-to-use-pytrilinos">
										<div class="qa-q-view-content">
											<a name="3911"></a><div class="entry-content"><p>I am trying to use run the tutorial with <a rel="nofollow" href="http://fenicsproject.org/documentation/tutorial/misc.html#linear-solvers-and-preconditioners">preconditioners</a> and is needed PyTrilinos.<br>
I have installed trilinos with PyTrilinos in a custome directory but python does not aware of the module.</p>

<pre><code>from PyTrilinos import Epetra, AztecOO, TriUtils, ML
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ImportError: No module named PyTrilinos
</code></pre>

<p>The installation of  trilinos was done in this directory</p>

<pre><code>~/trilinos-install/
</code></pre>

<p>I see the pakages of PyTrilinos in</p>

<pre><code>~/trilinos-install/lib/python2.7/site-packages/PyTrilinos
</code></pre>

<p>is there another step to link python to the module ?</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/pytrilinos" rel="tag" class="qa-tag-link">pytrilinos</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/tutorial" rel="tag" class="qa-tag-link">tutorial</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../3911/problem-to-use-pytrilinos" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2014-06-19T00:32:17+0000"></span>Jun 19, 2014</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/user478" class="qa-user-link url nickname">user478</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">230</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c3911_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467992-bbd95c56ce951e75d6d06e4f7da7f90dedca60d9">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer answer-selected qa-a-list-item-selected" id="a3912">
									<form method="post" action="../../3911/problem-to-use-pytrilinos">
										<div class="qa-voting qa-voting-net" id="voting_3912">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+1<span class="votes-up"><span class="value-title" title="1"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> vote</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516467992-03dd85eb82cdc9a0721c81c3568908c318b119b7">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../3911/problem-to-use-pytrilinos">
											<div class="qa-a-item-selected">
												<div class="qa-a-selection">
													<div class="qa-a-selected">&#160;</div>
													<div class="qa-a-selected-text">Best answer</div>
												</div>
												<div class="qa-a-item-content">
													<a name="3912"></a><div class="entry-content"><p>This is really a Python question, not a FEniCS question so probably not the right forum here. Anyway, if you install a Python module in a non-standard location you need to adjust the environment variable <code>PYTHONPATH</code> accordingly. If you are using bash you can try the following:</p>

<pre><code>export PYTHONPATH=$PYTHONPATH:~/trilinos-install/lib/python2.7/site-packages
</code></pre>

<p>If you then import PyTrilinos again it should hopefully work. Note that the changes will be lost if you exit your current shell, so if you want them to be persistent you need to add the above line somewhere in your <code>~/.bashrc</code> file.</p>
</div>
												</div>
												<span class="qa-a-item-avatar-meta">
													<span class="qa-a-item-meta">
														<a href="../../3911/problem-to-use-pytrilinos?show=3912#a3912" class="qa-a-item-what">answered</a>
														<span class="qa-a-item-when">
															<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2014-06-19T01:15:48+0000"></span>Jun 19, 2014</span></span>
														</span>
														<span class="qa-a-item-who">
															<span class="qa-a-item-who-pad">by </span>
															<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/Maximilian+Albert" class="qa-user-link url nickname">Maximilian Albert</a></span></span>
															<span class="qa-a-item-who-title">FEniCS User</span>
															<span class="qa-a-item-who-points">
																<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">1,750</span><span class="qa-a-item-who-points-pad"> points)</span>
															</span>
														</span>
														<br>
														<span class="qa-a-item-what">selected</span>
														<span class="qa-a-item-when">
															<span class="qa-a-item-when-data"><span class="updated"><span class="value-title" title="2014-06-19T16:58:01+0000"></span>Jun 19, 2014</span></span>
														</span>
														<span class="qa-a-item-who">
															<span class="qa-a-item-who-pad">by </span><span class="qa-a-item-who-data"><a href="../../user/user478" class="qa-user-link url nickname">user478</a></span>
														</span>
													</span>
												</span>
											</div>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c3912_list">
												<div class="qa-c-list-item  hentry comment" id="c3920">
													<div class="qa-c-item-content">
														<a name="3920"></a><div class="entry-content"><p>I exported</p>

<pre><code>export PYTHONPATH=$PYTHONPATH:~/trilinos-install/lib/python2.7/site-packages
</code></pre>

<p>and aditionally indicated the trilinos lib exporting the varibale LD_LIBRARY_PATH</p>

<pre><code>export LD_LIBRARY_PATH=~/trilinos-install/lib:$LD_LIBRARY_PATH
</code></pre>

<p>and the import is now well </p>

<pre><code>from PyTrilinos import Epetra, AztecOO, TriUtils, ML
</code></pre>

<p>However following  again the tutorial with <a rel="nofollow" href="http://fenicsproject.org/documentation/tutorial/misc.html#linear-solvers-and-preconditioners">preconditioners</a> says now the <code>has_la_backend</code> does not exists even thoug the fecnics is completely import (<code>from dolfin import *</code>). Where is that function?</p>

<pre><code>Traceback (most recent call last):
  File "Documents/solver.py", line 19, in &lt;module&gt;
    if not has_la_backend('Epetra'):
NameError: name 'has_la_backend' is not defined
</code></pre>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../3911/problem-to-use-pytrilinos?show=3920#c3920" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2014-06-19T17:10:29+0000"></span>Jun 19, 2014</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/user478" class="qa-user-link url nickname">user478</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">230</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c3923">
													<div class="qa-c-item-content">
														<a name="3923"></a><div class="entry-content"><p>I just checked and it looks like this function has been renamed to <code>has_linear_algebra_backend</code>. It seems that the documentation is not up to date in this respect. You may want to file a bug in the <a rel="nofollow" href="https://bitbucket.org/fenics-project/fenics-web/issues?status=new&amp;status=open">issue tracker for the documentation</a>.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../3911/problem-to-use-pytrilinos?show=3923#c3923" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2014-06-19T20:43:00+0000"></span>Jun 19, 2014</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Maximilian+Albert" class="qa-user-link url nickname">Maximilian Albert</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">1,750</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c3925">
													<div class="qa-c-item-content">
														<a name="3925"></a><div class="entry-content"><p>Thanks a lot, I have created a new issue for the <a rel="nofollow" href="https://bitbucket.org/fenics-project/fenics-web/issue/11/tutorial-11-not-updated">correction</a>. </p>

<p>But now return false with Epetra</p>

<pre><code>&gt;&gt;&gt; has_linear_algebra_backend('Epetra')
 False
</code></pre>

<p>I Proved with petcs and is ok</p>

<pre><code>&gt;&gt;&gt; has_linear_algebra_backend('PETSc')
True
</code></pre>

<p>and  compiled trilinos with epetra</p>

<pre><code>-D Trilinos_ENABLE_Epetra:BOOL=ON \  
-D Trilinos_ENABLE_EpetraExt:BOOL=ON \
</code></pre>

<p>epectra is in PyTrilinos</p>

<pre><code>from PyTrilinos import Epetra
</code></pre>

<p>is it necessary another configuration to recognize Epetra?</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../3911/problem-to-use-pytrilinos?show=3925#c3925" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2014-06-19T23:27:20+0000"></span>Jun 20, 2014</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/user478" class="qa-user-link url nickname">user478</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">230</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c3933">
													<div class="qa-c-item-content">
														<a name="3933"></a><div class="entry-content"><p>Sorry, I don't know the answer to this. Just a random guess: might it be necessary to compile dolfin itself with Trilinos and Epetra enabled? Anyway, this sort of question should probably be posted on the fenics-support mailing list (see <a rel="nofollow" href="http://fenicsproject.org/support/">here</a>).</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../3911/problem-to-use-pytrilinos?show=3933#c3933" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2014-06-20T21:18:46+0000"></span>Jun 20, 2014</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Maximilian+Albert" class="qa-user-link url nickname">Maximilian Albert</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">1,750</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c4112">
													<div class="qa-c-item-content">
														<a name="4112"></a><div class="entry-content"><p>Thanks, the problem was solved using the <a rel="nofollow" href="http://fenicsproject.org/download/installation_using_dorsal.html#installation-using-dorsal">dorsal installation</a></p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../3911/problem-to-use-pytrilinos?show=4112#c4112" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2014-07-13T20:12:52+0000"></span>Jul 13, 2014</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/user478" class="qa-user-link url nickname">user478</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">230</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516467992-49814509c729acb70b5d39fc664fac9b2ea87a60">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>