<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Which vertices in your dolfin_fine.xml database apply directly to the shape of the dolfin? - FEniCS Q&amp;A</title>
		<meta name="description" content="I have downloaded the mesh, and generated the dolfin using your database. Now I want to move the  ... method too? Thanks for any help in this regard.">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Which vertices in your dolfin_fine.xml database apply directly to the shape of the dolfin?</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q6756">
								<form method="post" action="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_6756">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516468086-6d374e20d29dcce1ddc30d684f67ffebdc1d0338">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
										<div class="qa-q-view-content">
											<a name="6756"></a><div class="entry-content"><p>I have downloaded the mesh, and generated the dolfin using your database.  Now I want to move the dolfin inside the mesh using my own code, but I need to know which vertices are used to make up the shape of the dolfin, so I know when points inside the mesh I should move using my code.</p>

<p>Also, do you have any other 2D triangular generated meshes with an inner deformation that I may apply my moving method too?  </p>

<p>Thanks for any help in this regard.</p>
</div>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2015-03-13T00:55:16+0000"></span>Mar 13, 2015</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/JOFE" class="qa-user-link url nickname">JOFE</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">120</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c6756_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516468086-4336ab98428d8d632574a38ef21d66f2192c0baa">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">2 Answers</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a6757">
									<form method="post" action="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
										<div class="qa-voting qa-voting-net" id="voting_6757">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468086-6d374e20d29dcce1ddc30d684f67ffebdc1d0338">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="6757"></a><div class="entry-content"><p>Just take a look at the .xml file. Obviously, the nodes that make up the boundary of the outer rectangle are those where either x or y is 0 or 1. Thus, you can get the dolfin by</p>

<p>dolfin = whole boundary - rectangle boundary</p>

<p>Once you have the dolfin as a SubDomain, you can get the vertices by marking a MeshFunction of dimension 0.</p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-avatar">
													<a href="../../user/Gregor+Mitscha-Baude" class="qa-avatar-link"><img src="../../?qa=image&amp;qa_blobid=3856551404141824203&amp;qa_size=40" width="32" height="40" class="qa-avatar-image" alt=""></a>
												</span>
												<span class="qa-a-item-meta">
													<a href="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin?show=6757#a6757" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2015-03-13T07:58:30+0000"></span>Mar 13, 2015</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/Gregor+Mitscha-Baude" class="qa-user-link url nickname">Gregor Mitscha-Baude</a></span></span>
														<span class="qa-a-item-who-title">FEniCS User</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">2,280</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c6757_list">
												<div class="qa-c-list-item  hentry comment" id="c6767">
													<div class="qa-c-item-content">
														<a name="6767"></a><div class="entry-content"><p>This will just give me ALL the nodes inside the rectangle boundary.  However, not every node inside is use to make up the shape of the dolfin (i.e. the point (0.2, 0.2) roughly is clearly a node inside, but is not apart of the design for the dolfin)</p>

<p>There are roughly 2800 nodes inside,  based on the database I have found some of the ones I need, but the others are mixed up with the others that I do not need.  So when I try to "move" the dolfin inside, only parts of the image is moving, which is distorting the shape which I do not want.</p>

<p>Errrr wait, I just read your last part.....will try it and see how it goes</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin?show=6767#c6767" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-03-13T17:58:40+0000"></span>Mar 13, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/JOFE" class="qa-user-link url nickname">JOFE</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">120</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468086-47d3a0fc196b664bb5ad446c4de39d48ed7600ee">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
								<div class="qa-a-list-item  hentry answer" id="a6758">
									<form method="post" action="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
										<div class="qa-voting qa-voting-net" id="voting_6758">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468086-6d374e20d29dcce1ddc30d684f67ffebdc1d0338">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="6758"></a><div class="entry-content"><p>Hi, consider</p>

<pre><code>from dolfin import *

mesh = Mesh('dolfin_fine.xml.gz')
# We will be getting vertices from facets that are on the boundary of domain
facet_f = FacetFunction('size_t', mesh, 0)

# Mark all facets on the boundary as 1
DomainBoundary().mark(facet_f, 1)

on_outer_boundary = lambda x: near(x[0]*(1-x[0]), 0) or near(x[1]*(1-x[1]), 0)
# Mark facets on the boundary of the square as 2
AutoSubDomain(lambda x, on_boundary:\
              on_boundary and on_outer_boundary(x)).mark(facet_f, 2)

# Get the vertices connected to facets marked with 2
mesh.init(1, 0)
dolfin_vertices = set(sum((facet.entities(0).tolist()
                           for facet in SubsetIterator(facet_f, 2)), []))

# Check
vertex_x = mesh.coordinates().reshape((-1, 2))
assert all(on_outer_boundary(vertex_x[vertex]) for vertex in dolfin_vertices) 
</code></pre>

<p>As far as other meshes are concerned, you can create them by yourself with <a rel="nofollow" href="https://bitbucket.org/benjamik/mshr/src/master/demo/python/?at=master">mshr</a>. Here's a 'funny' example</p>

<pre><code>from dolfin import Point, plot, interactive
from mshr import *

domain = Circle(Point(0, 0), 1) - Circle(Point(0.5, 0.5), 0.2)\
                                - Circle(Point(-0.5, 0.5), 0.2)\
                                - Circle(Point(0, -0.5), 0.35)\
                                - Rectangle(Point(-0.125, -0.125), Point(0.125, 0.5))

mesh = generate_mesh(domain, 50)

plot(mesh, title='What!')
interactive() 
</code></pre>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-avatar">
													<a href="../../user/MiroK" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/f566be3274ec73e3a6dda27bca11631c?s=40" width="40" height="40" class="qa-avatar-image" alt=""></a>
												</span>
												<span class="qa-a-item-meta">
													<a href="../../6756/which-vertices-dolfin_fine-database-directly-shape-dolfin?show=6758#a6758" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2015-03-13T09:15:16+0000"></span>Mar 13, 2015</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/MiroK" class="qa-user-link url nickname">MiroK</a></span></span>
														<span class="qa-a-item-who-title">FEniCS Expert</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">80,920</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" style="display:none;" id="c6758_list">
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468086-99db04a4869439b3ab5d888be807240959d2a3d0">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>