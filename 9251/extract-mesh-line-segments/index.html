<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Extract mesh line segments - FEniCS Q&amp;A</title>
		<meta name="description" content="Hi all, I try to plot a fenics mesh using a different plotting library (plotly), in order to ...  and end points like this? Thanks in advance! Adriaan">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/9251/extract-mesh-line-segments">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Extract mesh line segments</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q9251">
								<form method="post" action="../../9251/extract-mesh-line-segments">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_9251">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516468215-01a0dd5269b4bae8cbc8fed1ff304c5ac55a2123">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../9251/extract-mesh-line-segments">
										<div class="qa-q-view-content">
											<a name="9251"></a><div class="entry-content"><p>Hi all,</p>

<p>I try to plot a fenics mesh using a different plotting library (plotly), in order to plot 3D meshes inline in ipython notebook. In order to do that, I need all line segments forming the mesh, ordered in three arrays (x, y and z) in pairs of line start and end points like [line1_startpoint_x, line1_endpoint_x, line2_startpoint_x, line2_endpoint_x ...] and same for y and z.<br>
I know that the node coordinates can be extracted with mesh.coordinates(), but how to order them in line start and end points like this?</p>

<p>Thanks in advance!</p>

<p>Adriaan</p>
</div>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../9251/extract-mesh-line-segments" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2016-02-09T10:22:10+0000"></span>Feb 9, 2016</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/Adriaan" class="qa-user-link url nickname">Adriaan</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">660</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c9251_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516468215-58a68abb527de2f595afaf9c0c513276ada1eb1f">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a9254">
									<form method="post" action="../../9251/extract-mesh-line-segments">
										<div class="qa-voting qa-voting-net" id="voting_9254">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468215-01a0dd5269b4bae8cbc8fed1ff304c5ac55a2123">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../9251/extract-mesh-line-segments">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="9254"></a><div class="entry-content"><p>Try something like this, but update the code to follow the cell vertex numbering used in 3D, the example below is for 2D. You can find the numbering in the UFC manual/FEniCS book (I believe ...), or you can just inspect a random cell in the mesh and figure it out on your own.</p>

<pre><code>import dolfin as df

def get_triangulation(mesh):
    """
    Get the mesh triangulation in a format suitable for matplotlib (2D)
    """
    coords = mesh.coordinates()
    triangles = []
    for cell in df.cells(mesh):
        cell_vertices = cell.entities(0)
        triangles.append(cell_vertices)
    return coords, triangles
</code></pre>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-meta">
													<a href="../../9251/extract-mesh-line-segments?show=9254#a9254" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2016-02-09T13:14:11+0000"></span>Feb 9, 2016</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/Tormod+Landet" class="qa-user-link url nickname">Tormod Landet</a></span></span>
														<span class="qa-a-item-who-title">FEniCS User</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">5,130</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c9254_list">
												<div class="qa-c-list-item  hentry comment" id="c9279">
													<div class="qa-c-item-content">
														<a name="9279"></a><div class="entry-content"><p>It was brought to my attention that you may be looking for one continuous line made up of line segments that together form the entire mesh. If you do not want to include each line segment more than once then this is Euler's classical <a rel="nofollow" href="https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg">bridges of K&#246;ningsberg</a> problem, which very likely does not have a solution on your mesh (your mesh is probably not Eulerian).</p>

<p>If you can visit each edge more than once then you have a variant of the <a rel="nofollow" href="https://en.wikipedia.org/wiki/Route_inspection_problem">Chinese postman problem</a>.</p>

<p>On the practical side, you probably will want to plot each edge separately. This can be slow in some plotting libraries where the plotting routines are O(n) where n is the number of distinct lines plotted. Matplotlib has a library of collection that are used to speed things up. Maybe plotly has something similar, you can at least use the network graph features to get this working if plotting one and one line is too slow.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../9251/extract-mesh-line-segments?show=9279#c9279" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-02-11T08:07:06+0000"></span>Feb 11, 2016</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Tormod+Landet" class="qa-user-link url nickname">Tormod Landet</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">5,130</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468215-5c07fe45498422101cdfa7878f323955b2623865">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>