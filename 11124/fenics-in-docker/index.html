<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>FEniCS in Docker - FEniCS Q&amp;A</title>
		<meta name="description" content="Hello everyone, There are two versions of FEniCS installed on my machine (operating system ... .io/projects/containers/en/latest/performance.html">
		<meta name="keywords" content="containers-docker">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/11124/fenics-in-docker">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">FEniCS in Docker</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q11124">
								<form method="post" action="../../11124/fenics-in-docker">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_11124">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+3<span class="votes-up"><span class="value-title" title="3"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467095-10a5bfb68c0743fc630c803fc8dc7ed1f3fd5476">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../11124/fenics-in-docker">
										<div class="qa-q-view-content">
											<a name="11124"></a><div class="entry-content"><p>Hello everyone,</p>

<p>There are two versions of FEniCS installed on my machine (operating system is Mac OS X 10.10). One of these FEniCS installations is the Docker image v2016.1.0, and the other is v1.4 (native build) which was installed from a .dmg file a while ago. I have found that the Docker version runs much slower than the native build when running the same sample problems. But in the <a rel="nofollow" href="https://fenics.readthedocs.io/projects/containers/en/latest/performance.html">documentation</a> it says:</p>

<p>"In short, running FEniCS in Docker may actually be faster than using a native build since our Docker images have been tuned for performance, even when running Docker using virtualisation technologies on Mac and Windows."</p>

<p>Hopefully this question is not too vague, but does anyone know what may be causing the slower performance? Is FEniCS v2016.1.0 just slower than v1.4? I'm hoping that this is just a Docker problem that I can fix and get better performance. (I have allowed Docker to access up to 6 CPU's and 8 GB of RAM.)</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/containers-docker" rel="tag" class="qa-tag-link">containers-docker</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../11124/fenics-in-docker" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2016-09-12T23:20:22+0000"></span>Sep 13, 2016</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/jimmy" class="qa-user-link url nickname">jimmy</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">730</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" id="c11124_list">
											<div class="qa-c-list-item  hentry comment" id="c11135">
												<div class="qa-c-item-content">
													<a name="11135"></a><div class="entry-content"><p>Can you post some specific numbers? I've been interested in benchmark results comparing performance for Docker on Mac and native builds, but these are surprisingly difficult to find. Also: Are you using the new Docker on Mac (v1.12) or the older Docker Toolbox? (The former is supposed to be significantly closer to native.)</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/clason" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/94a5da5965065e3b99a3229b2ec9d1bb?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../11124/fenics-in-docker?show=11135#c11135" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-09-15T10:56:41+0000"></span>Sep 15, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/clason" class="qa-user-link url nickname">clason</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">880</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c11144">
												<div class="qa-c-item-content">
													<a name="11144"></a><div class="entry-content"><p>At the moment I do not have specific numbers to post, but I'll come up with something when time permits. And I'm currently using Docker v1.12.</p>

<p>Are you suggesting that the older Docker Toolbox will run FEniCS faster? Maybe I will try that out in the near future.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-meta">
															<a href="../../11124/fenics-in-docker?show=11144#c11144" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-09-16T06:07:29+0000"></span>Sep 16, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/jimmy" class="qa-user-link url nickname">jimmy</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">730</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c11148">
												<div class="qa-c-item-content">
													<a name="11148"></a><div class="entry-content"><p>The opposite -- Docker Toolbox will almost certainly be <em>slower</em> than the new Docker for Mac. </p>

<p>(And for what it's worth, I find the statement in the documentation to be a straw man at best: Of course you can mess up a native build to get arbitrarily slow performance (<code>gcc -march=i386</code>), but if you half know what you're doing -- and the developers, who provided the native build for macOS, presumably do -- then a virtualized image will <em>always</em> be slower than a native build. The question is only whether it's 10% slower -- which would be an acceptable trade-off -- or 50% slower or more.)</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/clason" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/94a5da5965065e3b99a3229b2ec9d1bb?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../11124/fenics-in-docker?show=11148#c11148" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-09-16T09:33:30+0000"></span>Sep 16, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/clason" class="qa-user-link url nickname">clason</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">880</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
															<br>
															<span class="qa-c-item-what">edited</span>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="updated"><span class="value-title" title="2016-09-16T15:07:32+0000"></span>Sep 16, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span><span class="qa-c-item-who-data"><a href="../../user/clason" class="qa-user-link url nickname">clason</a></span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c11169">
												<div class="qa-c-item-content">
													<a name="11169"></a><div class="entry-content"><p>It is not clear that a containerised install will be slower than the native install. Of course, it should be - but the likelihood is that optimisiations and library choices are better in the container than the native build. We often see docker running code faster than native, in fact. </p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../11124/fenics-in-docker?show=11169#c11169" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-09-19T15:53:43+0000"></span>Sep 19, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c11190">
												<div class="qa-c-item-content">
													<a name="11190"></a><div class="entry-content"><p>@chris_richardson Do you have numbers to back this up (not doubting you, just really interested)? And to make sure: we're talking specifically about <em>virtualized</em> containers (Docker on Mac), not the native containers used for Linux. As a comparison, the old Mac binary image from <a rel="nofollow" href="https://fenicsproject.org/download/osx_details.html">https://fenicsproject.org/download/osx_details.html</a> would be the obvious choice -- if Docker is faster (or nearly as fast) as this, the convenience indeed outweighs possible performance improvements from an optimized build from source.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/clason" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/94a5da5965065e3b99a3229b2ec9d1bb?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../11124/fenics-in-docker?show=11190#c11190" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-09-22T10:00:39+0000"></span>Sep 22, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/clason" class="qa-user-link url nickname">clason</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">880</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467095-45f77a7f652d35f7388544476eb773c1bd487cd5">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title" style="display:none;"></h2>
							<div class="qa-a-list" id="a_list">
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>