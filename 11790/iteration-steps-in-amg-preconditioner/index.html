<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>iteration steps in AMG preconditioner - FEniCS Q&amp;A</title>
		<meta name="description" content="Dear all, I have some questions about the AMG preconditioner in the Dolfin solve() funtion. Is the ...  function? Thank you very much for your help!">
		<meta name="keywords" content="preconditioner,krylov,amg">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/11790/iteration-steps-in-amg-preconditioner">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">iteration steps in AMG preconditioner</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q11790">
								<form method="post" action="../../11790/iteration-steps-in-amg-preconditioner">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_11790">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467786-8602ad0368216c5138ea36125a945e673b43f207">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../11790/iteration-steps-in-amg-preconditioner">
										<div class="qa-q-view-content">
											<a name="11790"></a><div class="entry-content"><p>Dear all,</p>

<p>I have some questions about the AMG preconditioner in the Dolfin solve() funtion. Is the implemented scheme V-cycle? If so,  how many iteration steps in the pre-smoothing and post-smoothing processes and how many grid levels are there? Can we change the number of iteration as a parameter in the function?</p>

<p>Thank you very much for your help!</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/preconditioner" rel="tag" class="qa-tag-link">preconditioner</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/krylov" rel="tag" class="qa-tag-link">krylov</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/amg" rel="tag" class="qa-tag-link">amg</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../11790/iteration-steps-in-amg-preconditioner" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2016-11-30T04:02:25+0000"></span>Nov 30, 2016</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/soddyjr" class="qa-user-link url nickname">soddyjr</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">150</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c11790_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467786-8defe94e2e77fe0c15fd698651a5e41302a81bdf">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a11843">
									<form method="post" action="../../11790/iteration-steps-in-amg-preconditioner">
										<div class="qa-voting qa-voting-net" id="voting_11843">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+1<span class="votes-up"><span class="value-title" title="1"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> vote</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516467786-8602ad0368216c5138ea36125a945e673b43f207">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../11790/iteration-steps-in-amg-preconditioner">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="11843"></a><div class="entry-content"><p>If you look at the implementation it seems that all it does is to call </p>

<p><a rel="nofollow" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/PC/PCHYPRESetType.html">http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/PC/PCHYPRESetType.html</a></p>

<p>then</p>

<p><a rel="nofollow" href="http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/PC/PCSetFromOptions.html">http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/PC/PCSetFromOptions.html</a></p>

<p>Implementation (I am assuming you are using PETSc):</p>

<p><a rel="nofollow" href="https://bitbucket.org/fenics-project/dolfin/src/ee5424f5def5434c68431215c64d8296676cd6cd/dolfin/la/PETScPreconditioner.cpp?at=master&amp;fileviewer=file-view-default">https://bitbucket.org/fenics-project/dolfin/src/ee5424f5def5434c68431215c64d8296676cd6cd/dolfin/la/PETScPreconditioner.cpp?at=master&amp;fileviewer=file-view-default</a></p>

<p>I have not done so myself, but I assume it is possible to dig into PETSc and figure out which options to set (via petsc4py) so that you can control the Hypre AMG preconditioner. You would then set the options before creating the preconditioner. In fact, you can probably get some info about this from the cbc.block implementation of AMG, see</p>

<p><a rel="nofollow" href="https://bitbucket.org/fenics-apps/cbc.block/src/4d03dfc0cb768ef32d48aa62ed498bfe1398df2c/block/algebraic/petsc/precond.py?at=master&amp;fileviewer=file-view-default#precond.py-107">https://bitbucket.org/fenics-apps/cbc.block/src/4d03dfc0cb768ef32d48aa62ed498bfe1398df2c/block/algebraic/petsc/precond.py?at=master&amp;fileviewer=file-view-default#precond.py-107</a></p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-meta">
													<a href="../../11790/iteration-steps-in-amg-preconditioner?show=11843#a11843" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2016-12-05T15:09:02+0000"></span>Dec 5, 2016</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/Tormod+Landet" class="qa-user-link url nickname">Tormod Landet</a></span></span>
														<span class="qa-a-item-who-title">FEniCS User</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">5,130</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" style="display:none;" id="c11843_list">
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516467786-dd3763bdb8a4e05f73651752c1e7a58e91563963">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>