<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Linear elasticity 2D mesh: Error - FEniCS Q&amp;A</title>
		<meta name="description" content="Hi, The following is the code for solving elasticity (linear) problem on a simple square  ... -poisson/python/documentation.html Pls. help. Thanks">
		<meta name="keywords" content="subdomain,linear-solver,elasticity">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/7856/linear-elasticity-2d-mesh-error">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Linear elasticity 2D mesh: Error</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q7856">
								<form method="post" action="../../7856/linear-elasticity-2d-mesh-error">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_7856">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516468142-00da7a26ab583a1e2dbb09868acd2fa125da27a0">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../7856/linear-elasticity-2d-mesh-error">
										<div class="qa-q-view-content">
											<a name="7856"></a><div class="entry-content"><p>Hi,</p>

<p>The following is the code for solving elasticity (linear) problem on a simple square mesh. I took this from an old launchpad question. </p>

<p><a rel="nofollow" href="https://github.com/ChaitanyaGoyal/2D_Linear_elasticity_Square_Plate/blob/master/Fenics_Drichilet_Load%20on%20top%20edge.py">https://github.com/ChaitanyaGoyal/2D_Linear_elasticity_Square_Plate/blob/master/Fenics_Drichilet_Load%20on%20top%20edge.py</a></p>

<p>It shows the following error when run:</p>

<p>page@Jarvis:~$ python 2D_Elasticity_node.py<br>
Traceback (most recent call last):<br>
  File "2D_Elasticity_node.py", line 38, in <br>
    obstacle.mark(domains, 1)<br>
  File "/usr/lib/python2.7/dist-packages/dolfin/cpp/mesh.py", line 4623, in mark<br>
    self._mark(*args)<br>
TypeError: SWIG director type mismatch expected 'bool' as the output argument of 'inside'</p>

<p>I can't see anything wrong with that statement as I have confirmed the domain coding from the following fenics documentation:</p>

<p><a rel="nofollow" href="http://fenicsproject.org/documentation/dolfin/1.2.0/python/demo/pde/subdomains-poisson/python/documentation.html">http://fenicsproject.org/documentation/dolfin/1.2.0/python/demo/pde/subdomains-poisson/python/documentation.html</a></p>

<p>Pls. help. Thanks</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/subdomain" rel="tag" class="qa-tag-link">subdomain</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/linear-solver" rel="tag" class="qa-tag-link">linear-solver</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/elasticity" rel="tag" class="qa-tag-link">elasticity</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-avatar">
												<a href="../../user/Chaitanya_Raj_Goyal" class="qa-avatar-link"><img src="../../?qa=image&amp;qa_blobid=5557427273671820211&amp;qa_size=50" width="50" height="31" class="qa-avatar-image" alt=""></a>
											</span>
											<span class="qa-q-view-meta">
												<a href="../../7856/linear-elasticity-2d-mesh-error" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2015-08-19T16:47:35+0000"></span>Aug 19, 2015</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/Chaitanya_Raj_Goyal" class="qa-user-link url nickname">Chaitanya_Raj_Goyal</a></span></span>
													<span class="qa-q-view-who-title">FEniCS User</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">4,150</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
												<br>
												<span class="qa-q-view-what">edited</span>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="updated"><span class="value-title" title="2015-08-23T18:43:26+0000"></span>Aug 23, 2015</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span><span class="qa-q-view-who-data"><a href="../../user/Chaitanya_Raj_Goyal" class="qa-user-link url nickname">Chaitanya_Raj_Goyal</a></span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c7856_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516468142-eef58a4eae90fda63beca795b7ce161aa901f92c">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer answer-selected qa-a-list-item-selected" id="a7874">
									<form method="post" action="../../7856/linear-elasticity-2d-mesh-error">
										<div class="qa-voting qa-voting-net" id="voting_7874">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468142-00da7a26ab583a1e2dbb09868acd2fa125da27a0">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../7856/linear-elasticity-2d-mesh-error">
											<div class="qa-a-item-selected">
												<div class="qa-a-selection">
													<div class="qa-a-selected">&#160;</div>
													<div class="qa-a-selected-text">Best answer</div>
												</div>
												<div class="qa-a-item-content">
													<a name="7874"></a><div class="entry-content"><p>I think you forgot to actually put <code>near(...)</code> in the output of the <code>inside()</code> function for obstacle :D.</p>

<p>But then I get a different problem if I try to start your code because there is another error. In line 41, you set the "default" domain value to <code>0</code>, but then in line 81 you integrate over domain <code>1</code>. After replacing <code>1</code> by <code>0</code> everything works fine for me.</p>

<p>regards</p>
</div>
												</div>
												<span class="qa-a-item-avatar-meta">
													<span class="qa-a-item-meta">
														<a href="../../7856/linear-elasticity-2d-mesh-error?show=7874#a7874" class="qa-a-item-what">answered</a>
														<span class="qa-a-item-when">
															<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2015-08-20T16:56:28+0000"></span>Aug 20, 2015</span></span>
														</span>
														<span class="qa-a-item-who">
															<span class="qa-a-item-who-pad">by </span>
															<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/multigrid202" class="qa-user-link url nickname">multigrid202</a></span></span>
															<span class="qa-a-item-who-title">FEniCS User</span>
															<span class="qa-a-item-who-points">
																<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">3,780</span><span class="qa-a-item-who-points-pad"> points)</span>
															</span>
														</span>
														<br>
														<span class="qa-a-item-what">selected</span>
														<span class="qa-a-item-when">
															<span class="qa-a-item-when-data"><span class="updated"><span class="value-title" title="2015-08-21T22:38:37+0000"></span>Aug 22, 2015</span></span>
														</span>
														<span class="qa-a-item-who">
															<span class="qa-a-item-who-pad">by </span><span class="qa-a-item-who-data"><a href="../../user/Chaitanya_Raj_Goyal" class="qa-user-link url nickname">Chaitanya_Raj_Goyal</a></span>
														</span>
													</span>
												</span>
											</div>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c7874_list">
												<div class="qa-c-list-item  hentry comment" id="c7891">
													<div class="qa-c-item-content">
														<a name="7891"></a><div class="entry-content"><p>Hi multigrid202, Thanks a lot for your input. The 'near' problem was correct. <br>
After setting the default domain to 0, I set obstacle.domain to 1 and thats why I used dx(1)</p>

<p>This was suggested by Jan Blechta at the following link:</p>

<p><a rel="nofollow" href="https://answers.launchpad.net/dolfin/+question/227859">https://answers.launchpad.net/dolfin/+question/227859</a></p>

<p>However, Could you pls. explain when this guy says I want to apply a neumann BC on node (1,1) and then Jan Blechta asks him go for the dx(1) approach, what does this imply physically, what are they trying to do to node (1,1)?</p>

<p>Thanks a ton for taking interest and helping me out with these trivial conceptual doubts. Means a lot.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/Chaitanya_Raj_Goyal" class="qa-avatar-link"><img src="../../?qa=image&amp;qa_blobid=5557427273671820211&amp;qa_size=20" width="20" height="12" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../7856/linear-elasticity-2d-mesh-error?show=7891#c7891" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-08-21T22:38:33+0000"></span>Aug 22, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Chaitanya_Raj_Goyal" class="qa-user-link url nickname">Chaitanya_Raj_Goyal</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">4,150</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c7894">
													<div class="qa-c-item-content">
														<a name="7894"></a><div class="entry-content"><p>Hello there,</p>

<p>I don't know why they used dx(1) in that old question, it really doesn't make much sense. I suspect that it is a typo. The bilinear from $a$ is <em>always</em> defined on your domain and never on any obstacles. I also don't really get why the upper right corner is called <em>obstacle</em> ^^</p>

<p>Anyway, physically they are trying to apply a force to that corner. Imagine attaching a piece of string there and then pulling... </p>

<p>Two more remarks on that:</p>

<p>From a mathematical point of view, a pointwise boundary condition is meaningless. Physically, imagine pushing an infinitely thin needle into your desk. It will punch a hole at any non-zero force. This often is not a problem in a finite element code if the mesh is coarse enough, but personally, I consider it bad practice. If you have a fine mesh at the point where the force is applied, then you will get weird results.</p>

<p>The dx(1) has nothing to do with the boundary condition. dx(1) (or rather dx(0)) only specifies the domain where your problem is defined. But you only really need that if there is a reason to split your domain into two subdomains, e.g. if you have a plate that has a different youngs's modulus in one area. But in the current example, there is no real reason to use it. Just delete the definition of <code>dx=...</code> and only put <code>dx</code> where it says <code>a=...</code> Now, I explained in a different post that if you don't specify any boundary condition, then you will automatically get homogenous neumann conditions. If you want to apply a nonzero tractions force $g$ at a part of the boundary $\Gamma_N$, then you need to add $\int_{\Gamma_N}gv\;ds$ to the right hand side of your weak form ($v$ is a test function). Note that if $g=0$, this corresponds to "doing nothing" as explained above.</p>

<p>On another note: I strongly suggest that you take some type of course on the finite element method. Youtube is a good source. It has lectures e.g. from MIT. I am obviously happy to help, but I think that a structured introduction to the finite element method would be very beneficial for you. Especially, because you already know fenics and you can try out all the concepts during the lectures :)</p>

<p>best regards</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../7856/linear-elasticity-2d-mesh-error?show=7894#c7894" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-08-22T09:13:12+0000"></span>Aug 22, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/multigrid202" class="qa-user-link url nickname">multigrid202</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">3,780</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c7896">
													<div class="qa-c-item-content">
														<a name="7896"></a><div class="entry-content"><p>Thank you very much for explaining that. I' ll post this link as a comment on the old launchpad question for anyone who might want to further pursue that thread in future.</p>

<p>I' ll definitely follow your suggestion the online learning for better understanding. Thanks!!</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/Chaitanya_Raj_Goyal" class="qa-avatar-link"><img src="../../?qa=image&amp;qa_blobid=5557427273671820211&amp;qa_size=20" width="20" height="12" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../7856/linear-elasticity-2d-mesh-error?show=7896#c7896" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-08-23T18:38:35+0000"></span>Aug 23, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Chaitanya_Raj_Goyal" class="qa-user-link url nickname">Chaitanya_Raj_Goyal</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">4,150</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468142-a1c9e480890dc7b485c1a8e151bb49f5430ab2b7">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>