<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>FreeCAD + FEniCS - FEniCS Q&amp;A</title>
		<meta name="description" content="My workflow at the moment is as follows: 1. Use GMSH to define a geometry (2D or 3D)  ... / [2]: https://en.wikiversity.org/wiki/CAD_to_FEniCS_example">
		<meta name="keywords" content="freecad,gmsh,netgen">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/10129/freecad-fenics">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">FreeCAD + FEniCS</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q10129">
								<form method="post" action="../../10129/freecad-fenics">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_10129">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467042-2a992dba2ad29c7c8f6fa14c44ca4969a610c8bf">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../10129/freecad-fenics">
										<div class="qa-q-view-content">
											<a name="10129"></a><div class="entry-content"><p>My workflow at the moment is as follows:</p>

<ol>
<li>Use GMSH to define a geometry (2D or 3D) and to create a mesh. This<br>
also includes the definition of <em>physical surfaces</em> and <em>physical<br>
regions</em> that I need for my program.</li>
<li>Convert with <code>dolfin-convert</code> and do the finite-element parts in<br>
FEniCS</li>
<li>Visualize the results in Paraview</li>
</ol>

<p>Now I would like to replace the first step with <a rel="nofollow" href="http://www.freecadweb.org/">FreeCAD</a> for the geometry and Netgen for the meshing. Reasons include license (LPGL), and in case of FreeCAD, a more useful GUI compared to GMSH to create more complex geometries. Also the fact that, just like FEniCS and Paraview, there is an Python API available would be useful to me.</p>

<p>I wondered if anyone has tried this succesfully? The closest I found was this:<br>
<a rel="nofollow" href="https://en.wikiversity.org/wiki/CAD_to_FEniCS_example"></a><a rel="nofollow" href="https://en.wikiversity.org/wiki/CAD_to_FEniCS_example">https://en.wikiversity.org/wiki/CAD_to_FEniCS_example</a></p>

<p>In particular, I wonder:</p>

<ul>
<li>How to include something like GMSH's physical surfaces and regions?</li>
<li>Which file format to use as intermediate step?</li>
<li>Etc.</li>
</ul>

<p>In short, any useful tips here are welcome.</p>

<p>Thanks!</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/freecad" rel="tag" class="qa-tag-link">freecad</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/gmsh" rel="tag" class="qa-tag-link">gmsh</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/netgen" rel="tag" class="qa-tag-link">netgen</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../10129/freecad-fenics" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2016-05-19T12:41:51+0000"></span>May 19, 2016</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/maartent" class="qa-user-link url nickname">maartent</a></span></span>
													<span class="qa-q-view-who-title">FEniCS User</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">3,910</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c10129_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467042-c2c5a4b5d16d7edafb8a778b1826b46624dff47b">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a10145">
									<form method="post" action="../../10129/freecad-fenics">
										<div class="qa-voting qa-voting-net" id="voting_10145">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516467042-2a992dba2ad29c7c8f6fa14c44ca4969a610c8bf">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../10129/freecad-fenics">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="10145"></a><div class="entry-content"><p>FreeCAD supports the off format which may be directly loaded<br>
into mshr for use in FEniCS. It is an alternative which may <br>
simplify your pipeline. </p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-meta">
													<a href="../../10129/freecad-fenics?show=10145#a10145" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2016-05-22T13:13:29+0000"></span>May 22, 2016</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/Kent-Andre+Mardal" class="qa-user-link url nickname">Kent-Andre Mardal</a></span></span>
														<span class="qa-a-item-who-title">FEniCS Expert</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">14,380</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c10145_list">
												<div class="qa-c-list-item  hentry comment" id="c10146">
													<div class="qa-c-item-content">
														<a name="10146"></a><div class="entry-content"><p>That is an option, thanks! Do you know of any tutorials/examples that use this approach and include the definition of regions / surfaces that can later be used in FEniCS (eg. to define boundary conditions)? mshr's documentation is rather sparse.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../10129/freecad-fenics?show=10146#c10146" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-05-22T15:28:06+0000"></span>May 22, 2016</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/maartent" class="qa-user-link url nickname">maartent</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">3,910</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c10147">
													<div class="qa-c-item-content">
														<a name="10147"></a><div class="entry-content"><p>Subdomains, regions is being added to mshr as we speak. <br>
Can you send me a simple example? </p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../10129/freecad-fenics?show=10147#c10147" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-05-22T15:49:13+0000"></span>May 22, 2016</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Kent-Andre+Mardal" class="qa-user-link url nickname">Kent-Andre Mardal</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Expert</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">14,380</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c10148">
													<div class="qa-c-item-content">
														<a name="10148"></a><div class="entry-content"><p>As a simple example of what I want to do, see my answer to this question (2nd answer):<br>
<a rel="nofollow" href="http://fenicsproject.org/qa/9760/what-is-the-best-approach-to-mesh-refinement-on-boundary">http://fenicsproject.org/qa/9760/what-is-the-best-approach-to-mesh-refinement-on-boundary</a></p>

<p>In GMSH, it is easy to define eg. <code>Physical Line(1)</code> in the geo-file and use the same labeling later on in FEniCS, as in the line</p>

<pre><code>bcs = [DirichletBC(V, Constant(0), boundaries, 1)]
</code></pre>

<p>At the moment I don't know too much about the file formats and their implementation, but I assume that an .off format also has an option to include this kind of information. It would be helpful to see an example like in the link I provided, but where a CAD program is used instead off GMSH.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-meta">
																<a href="../../10129/freecad-fenics?show=10148#c10148" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-05-22T16:12:31+0000"></span>May 22, 2016</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/maartent" class="qa-user-link url nickname">maartent</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">3,910</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516467042-92117205e97375c6c5a233ddd772356cdd3f75f6">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>