<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>How can I use DirichletBC.gather()? - FEniCS Q&amp;A</title>
		<meta name="description" content="Dear FEniCS person, I am running an application in parallel and wondering how I can get the global  ... if not as in the script. Best Regards, Gabriel">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/2718/how-can-i-use-dirichletbc-gather">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">How can I use DirichletBC.gather()?</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q2718">
								<form method="post" action="../../2718/how-can-i-use-dirichletbc-gather">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_2718">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467940-9146ff2d75ad5a5cfba9f7aed74e4959f4167387">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../2718/how-can-i-use-dirichletbc-gather">
										<div class="qa-q-view-content">
											<a name="2718"></a><div class="entry-content"><p>Dear FEniCS person,<br>
I am running an application in parallel and wondering how I can get the global set of boundary values for an object of type DirichletBC.</p>

<p>I test with the following script</p>

<h2>global_bc.py</h2>

<p>from dolfin import *<br>
m = UnitCubeMesh(1,1,1)<br>
V = FunctionSpace(m, "CG", 1)<br>
bc = DirichletBC(V, 1.0, "near(x[0], 0.0)")<br>
bc.gather()<br>
bc_dofs = bc.get_boundary_values().keys()<br>
print bc_dofs</p>

<p>If i run the script <br>
mpirun -n 3 python global_bc.py</p>

<p>I get the output<br>
[]<br>
[2L, 4L, 5L, 7L]<br>
[]</p>

<p>Which looks like only the second processor owns the dofs in the bc. The method gather() returns a dictionary and accepts no parameters so I am confused as to how it should be used if not as in the script.</p>

<p>Best Regards,<br>
   Gabriel</p>
</div>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../2718/how-can-i-use-dirichletbc-gather" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2014-02-13T15:01:24+0000"></span>Feb 13, 2014</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/Gabriel+Balaban" class="qa-user-link url nickname">Gabriel Balaban</a></span></span>
													<span class="qa-q-view-who-title">FEniCS User</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">1,210</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" style="display:none;" id="c2718_list">
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467940-5a818de5ff5b04f5310d319026cfe977e03b4daa">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">1 Answer</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a2723">
									<form method="post" action="../../2718/how-can-i-use-dirichletbc-gather">
										<div class="qa-voting qa-voting-net" id="voting_2723">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516467940-9146ff2d75ad5a5cfba9f7aed74e4959f4167387">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../2718/how-can-i-use-dirichletbc-gather">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="2723"></a><div class="entry-content"><p>This looks like a bug in the Python wrapping of gather. </p>

<p>The function gather is used by DirichletBC to distribute shared boundary values between processes. However, the C++ version takes the boundary values as argument, checks if the bv dof is shared and in that case the bv is distributed to its neighbours. This does not work from the Python since you're not allowed to send the boundary values in as argument (the Python gather takes no arguments). You should report the bug on bitbucket.</p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-avatar">
													<a href="../../user/mikael-mortensen" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d5614112a2818f1800a461e49ac229df?s=40" width="40" height="40" class="qa-avatar-image" alt=""></a>
												</span>
												<span class="qa-a-item-meta">
													<a href="../../2718/how-can-i-use-dirichletbc-gather?show=2723#a2723" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2014-02-14T11:49:03+0000"></span>Feb 14, 2014</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/mikael-mortensen" class="qa-user-link url nickname">mikael-mortensen</a></span></span>
														<span class="qa-a-item-who-title">FEniCS Expert</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">29,340</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" style="display:none;" id="c2723_list">
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516467940-12ddf001b6576829e778783d51b1d0a13add076e">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>