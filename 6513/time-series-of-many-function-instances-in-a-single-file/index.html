<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Time series of many Function instances in a single file - FEniCS Q&amp;A</title>
		<meta name="description" content="My problem requires the output of many state variables - these are mainly concentrations of chemical  ...  &lt; T: for species in species_list: file">
		<meta name="keywords" content="timeseries,xdmf,function">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/6513/time-series-of-many-function-instances-in-a-single-file">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Time series of many Function instances in a single file</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q6513">
								<form method="post" action="../../6513/time-series-of-many-function-instances-in-a-single-file">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_6513">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">0<span class="votes-up"><span class="value-title" title="0"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516468075-c19f3a7dd17f995607f37ae44df834ae3bf35eb0">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../6513/time-series-of-many-function-instances-in-a-single-file">
										<div class="qa-q-view-content">
											<a name="6513"></a><div class="entry-content"><p>My problem requires the output of many state variables - these are mainly concentrations of chemical species in a reactive fluid flow problem.</p>

<p>Ideally, every <code>Function</code> instance for each of these state variables should be output to a single <code>xdmf</code> file.</p>

<p>I have tried the following:</p>

<pre><code>file = XDMFFile(mesh.mpi_comm(), 'result.xdmf')
while t &lt; T:
    for species in species_list:
        file &lt;&lt; (n[species], t)
    t += dt
</code></pre>

<p>where <code>n[species]</code> returns the <code>Function</code> instance for a species named <code>species</code> (e.g., H2O, CO2).</p>

<p>When loading <code>result.xdmf</code> in Paraview, only the time series for the <strong>last</strong> chemical species is available - a spreadsheet view of this dataset shows <code>nan</code> for all others.</p>

<p>Having one file for every species requires a lot more effort to setup the visualization in Paraview. Also, a single spreadsheet view of all these data is not easily achievable, which I often need to create plots in <code>gnuplot</code>. </p>

<p>What am I doing wrong?</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/timeseries" rel="tag" class="qa-tag-link">timeseries</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/xdmf" rel="tag" class="qa-tag-link">xdmf</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/function" rel="tag" class="qa-tag-link">function</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-avatar">
												<a href="../../user/allanleal" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/46d25a5e10f40a57f5a0d37e5bc7c5ed?s=50" width="50" height="50" class="qa-avatar-image" alt=""></a>
											</span>
											<span class="qa-q-view-meta">
												<a href="../../6513/time-series-of-many-function-instances-in-a-single-file" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2015-02-13T07:42:35+0000"></span>Feb 13, 2015</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">280</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" id="c6513_list">
											<div class="qa-c-list-item  hentry comment" id="c6516">
												<div class="qa-c-item-content">
													<a name="6516"></a><div class="entry-content"><p>Here is the <code>xdmf</code> file for two chemical species (<code>Ca+2</code>, and <code>Mg+2</code>). There are only two time steps.</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;Xdmf Version="2.0" xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
  &lt;Domain&gt;
    &lt;Grid Name="TimeSeries_Ca+2" GridType="Collection" CollectionType="Temporal"&gt;
      &lt;Time TimeType="List"&gt;
        &lt;DataItem Format="XML" Dimensions="2"&gt; 0 100&lt;/DataItem&gt;
      &lt;/Time&gt;
      &lt;Grid Name="Ca+2_0" GridType="Uniform"&gt;
        &lt;Topology NumberOfElements="20" TopologyType="Triangle"&gt;
          &lt;DataItem Format="HDF" Dimensions="20 3"&gt;data.h5:/Mesh/0/topology&lt;/DataItem&gt;
        &lt;/Topology&gt;
        &lt;Geometry GeometryType="XY"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 2"&gt;data.h5:/Mesh/0/coordinates&lt;/DataItem&gt;
        &lt;/Geometry&gt;
        &lt;Attribute Name="Ca+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/0&lt;/DataItem&gt;
        &lt;/Attribute&gt;
      &lt;/Grid&gt;
      &lt;Grid Name="Ca+2_2" GridType="Uniform"&gt;
        &lt;Topology NumberOfElements="20" TopologyType="Triangle"&gt;
          &lt;DataItem Format="HDF" Dimensions="20 3"&gt;data.h5:/Mesh/2/topology&lt;/DataItem&gt;
        &lt;/Topology&gt;
        &lt;Geometry GeometryType="XY"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 2"&gt;data.h5:/Mesh/2/coordinates&lt;/DataItem&gt;
        &lt;/Geometry&gt;
        &lt;Attribute Name="Ca+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/2&lt;/DataItem&gt;
        &lt;/Attribute&gt;
      &lt;/Grid&gt;
    &lt;/Grid&gt;
    &lt;Grid Name="TimeSeries_Mg+2" GridType="Collection" CollectionType="Temporal"&gt;
      &lt;Time TimeType="List"&gt;
        &lt;DataItem Format="XML" Dimensions="2"&gt; 0 100&lt;/DataItem&gt;
      &lt;/Time&gt;
      &lt;Grid Name="Mg+2_1" GridType="Uniform"&gt;
        &lt;Topology NumberOfElements="20" TopologyType="Triangle"&gt;
          &lt;DataItem Format="HDF" Dimensions="20 3"&gt;data.h5:/Mesh/1/topology&lt;/DataItem&gt;
        &lt;/Topology&gt;
        &lt;Geometry GeometryType="XY"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 2"&gt;data.h5:/Mesh/1/coordinates&lt;/DataItem&gt;
        &lt;/Geometry&gt;
        &lt;Attribute Name="Mg+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/1&lt;/DataItem&gt;
        &lt;/Attribute&gt;
      &lt;/Grid&gt;
      &lt;Grid Name="Mg+2_3" GridType="Uniform"&gt;
        &lt;Topology NumberOfElements="20" TopologyType="Triangle"&gt;
          &lt;DataItem Format="HDF" Dimensions="20 3"&gt;data.h5:/Mesh/3/topology&lt;/DataItem&gt;
        &lt;/Topology&gt;
        &lt;Geometry GeometryType="XY"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 2"&gt;data.h5:/Mesh/3/coordinates&lt;/DataItem&gt;
        &lt;/Geometry&gt;
        &lt;Attribute Name="Mg+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/3&lt;/DataItem&gt;
        &lt;/Attribute&gt;
      &lt;/Grid&gt;
    &lt;/Grid&gt;
  &lt;/Domain&gt;
&lt;/Xdmf&gt;
</code></pre>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/allanleal" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/46d25a5e10f40a57f5a0d37e5bc7c5ed?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6516#c6516" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T09:08:03+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">280</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c6517">
												<div class="qa-c-item-content">
													<a name="6517"></a><div class="entry-content"><p>As you can see, there are two time series. You can probably get this file to work by doing a bit of manual editing on it, e.g. move the <code>&lt;Attribute Name="Mg+2"&gt;</code> sections into the <code>&lt;Grid&gt;</code> sections of the <code>Ca+2</code> section, i.e. something like this:</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;Xdmf Version="2.0" xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
  &lt;Domain&gt;
    &lt;Grid Name="TimeSeries_Ca+2" GridType="Collection" CollectionType="Temporal"&gt;
      &lt;Time TimeType="List"&gt;
        &lt;DataItem Format="XML" Dimensions="2"&gt; 0 100&lt;/DataItem&gt;
      &lt;/Time&gt;
      &lt;Grid Name="Ca+2_0" GridType="Uniform"&gt;
        &lt;Topology NumberOfElements="20" TopologyType="Triangle"&gt;
          &lt;DataItem Format="HDF" Dimensions="20 3"&gt;data.h5:/Mesh/0/topology&lt;/DataItem&gt;
        &lt;/Topology&gt;
        &lt;Geometry GeometryType="XY"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 2"&gt;data.h5:/Mesh/0/coordinates&lt;/DataItem&gt;
        &lt;/Geometry&gt;
        &lt;Attribute Name="Ca+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/0&lt;/DataItem&gt;
        &lt;/Attribute&gt;
        &lt;Attribute Name="Mg+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/1&lt;/DataItem&gt;
        &lt;/Attribute&gt;
      &lt;/Grid&gt;
      &lt;Grid Name="Ca+2_2" GridType="Uniform"&gt;
        &lt;Topology NumberOfElements="20" TopologyType="Triangle"&gt;
          &lt;DataItem Format="HDF" Dimensions="20 3"&gt;data.h5:/Mesh/2/topology&lt;/DataItem&gt;
        &lt;/Topology&gt;
        &lt;Geometry GeometryType="XY"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 2"&gt;data.h5:/Mesh/2/coordinates&lt;/DataItem&gt;
        &lt;/Geometry&gt;
        &lt;Attribute Name="Ca+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/2&lt;/DataItem&gt;
        &lt;/Attribute&gt;
        &lt;Attribute Name="Mg+2" AttributeType="Scalar" Center="Node"&gt;
          &lt;DataItem Format="HDF" Dimensions="22 1"&gt;data.h5:/VisualisationVector/3&lt;/DataItem&gt;
        &lt;/Attribute&gt;
      &lt;/Grid&gt;
    &lt;/Grid&gt;
  &lt;/Domain&gt;
&lt;/Xdmf&gt;
</code></pre>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6517#c6517" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T09:31:52+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c6518">
												<div class="qa-c-item-content">
													<a name="6518"></a><div class="entry-content"><p>The problem is now how to define a good user interface for this intended output.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6518#c6518" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T09:32:26+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c6520">
												<div class="qa-c-item-content">
													<a name="6520"></a><div class="entry-content"><p>Your solution could work (I haven't tested). However, it is not practical when thousands of lines would need to be moved to the <code>Grid</code> block.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/allanleal" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/46d25a5e10f40a57f5a0d37e5bc7c5ed?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6520#c6520" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T09:47:12+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">280</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c6521">
												<div class="qa-c-item-content">
													<a name="6521"></a><div class="entry-content"><p>Maybe you can test it, and if it works, the developers can think about how to implement it better. Until then, you will have to use multiple files, I guess.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6521#c6521" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T09:49:52+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Expert</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
											<div class="qa-c-list-item  hentry comment" id="c6522">
												<div class="qa-c-item-content">
													<a name="6522"></a><div class="entry-content"><p>What you suggested resulted in the exact behaviour I was expecting from Paraview - well done. Now with a single file I can do a Plot Over Line for all species, for example - a time saver. Well, until this is properly fixed, I will try to implement a python script to parse the <code>xdmf</code> file and modify it according to your suggestion.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-avatar">
															<a href="../../user/allanleal" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/46d25a5e10f40a57f5a0d37e5bc7c5ed?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
														</span>
														<span class="qa-c-item-meta">
															<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6522#c6522" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T10:01:20+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">280</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
															<br>
															<span class="qa-c-item-what">edited</span>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="updated"><span class="value-title" title="2015-02-13T10:10:18+0000"></span>Feb 13, 2015</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span><span class="qa-c-item-who-data"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516468075-f3e4aa7b2545ac8bb364cb1cc0dd8ddb84420d29">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title">2 Answers</h2>
							<div class="qa-a-list" id="a_list">
								
								<div class="qa-a-list-item  hentry answer" id="a6514">
									<form method="post" action="../../6513/time-series-of-many-function-instances-in-a-single-file">
										<div class="qa-voting qa-voting-net" id="voting_6514">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+1<span class="votes-up"><span class="value-title" title="1"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> vote</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468075-c19f3a7dd17f995607f37ae44df834ae3bf35eb0">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../6513/time-series-of-many-function-instances-in-a-single-file">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="6514"></a><div class="entry-content"><p>What you are doing should work, in theory, and I think the <code>.xdmf</code> file will be valid.<br>
It may be a question of how ParaView is interpreting the file.</p>

<p>I think the problem is that each <code>Function</code> is saved as a separate time series (reasonably enough, as you can specify different times "<code>t</code>" for each <code>Function</code>. What ParaView is probably expecting is several sets of values for the same time. </p>

<p>It's not clear if or how this should be implemented in terms of the user interface. Possibly, we could have a way of accepting a list of <code>Function</code>s as an input to XDMFFile.</p>

<p>You could post a simple <code>.xdmf</code> to demonstrate the problem. </p>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-avatar">
													<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=40" width="40" height="40" class="qa-avatar-image" alt=""></a>
												</span>
												<span class="qa-a-item-meta">
													<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6514#a6514" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T08:59:03+0000"></span>Feb 13, 2015</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
														<span class="qa-a-item-who-title">FEniCS Expert</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">31,740</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" style="display:none;" id="c6514_list">
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468075-1cff23d2ccc5e01b056795b85cc33c803f01a3f5">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
								<div class="qa-a-list-item  hentry answer" id="a6523">
									<form method="post" action="../../6513/time-series-of-many-function-instances-in-a-single-file">
										<div class="qa-voting qa-voting-net" id="voting_6523">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+1<span class="votes-up"><span class="value-title" title="1"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> vote</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
										<input type="hidden" name="code" value="0-1516468075-c19f3a7dd17f995607f37ae44df834ae3bf35eb0">
									</form>
									<div class="qa-a-item-main">
										<form method="post" action="../../6513/time-series-of-many-function-instances-in-a-single-file">
											<div class="qa-a-selection">
											</div>
											<div class="qa-a-item-content">
												<a name="6523"></a><div class="entry-content"><p>Based on Chris suggestions, the following python script will convert a time series <code>xdmf</code> file with different <code>Function</code> instances that can be properly understood by Paraview:</p>

<p>The usage is as follows:</p>

<pre><code>./xdmf-parser.py result.xdmf
</code></pre>

<p>assuming that the script is called <code>xdmf-parser.py</code>.</p>

<pre><code>#!/usr/bin/python

import sys
import xml.etree.ElementTree as et

if len(sys.argv) &lt; 2:
    raise RuntimeError('No arguments provided to the parser.')

filename = sys.argv[1]

if len(sys.argv) &gt; 2:
    output = sys.argv[2]
else:
    output = filename[:filename.find('.')] + '-out.xdmf'

tree = et.parse(filename)
root = tree.getroot()
domain = root.find('Domain')
grids = domain.findall('Grid')

timeseries = grids[0]

other_timeseries = grids[1:]

attributes = []

for grid in other_timeseries:
    innergrids = grid.findall('Grid')
    attributes_aux = []
    for x in innergrids:
        attribute = x.find('Attribute')
        attributes_aux.append(attribute)
    attributes.append(attributes_aux)

timeseries_grids = timeseries.findall('Grid')

for grid_attributes in attributes:
    for (grid, attribute) in zip(timeseries_grids, grid_attributes):
        grid.append(attribute)

for x in other_timeseries:
    domain.remove(x)

tree.write(output, encoding="utf-8", xml_declaration=True)
</code></pre>
</div>
											</div>
											<span class="qa-a-item-avatar-meta">
												<span class="qa-a-item-avatar">
													<a href="../../user/allanleal" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/46d25a5e10f40a57f5a0d37e5bc7c5ed?s=40" width="40" height="40" class="qa-avatar-image" alt=""></a>
												</span>
												<span class="qa-a-item-meta">
													<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6523#a6523" class="qa-a-item-what">answered</a>
													<span class="qa-a-item-when">
														<span class="qa-a-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T12:35:23+0000"></span>Feb 13, 2015</span></span>
													</span>
													<span class="qa-a-item-who">
														<span class="qa-a-item-who-pad">by </span>
														<span class="qa-a-item-who-data"><span class="vcard author"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span></span>
														<span class="qa-a-item-who-title">FEniCS Novice</span>
														<span class="qa-a-item-who-points">
															<span class="qa-a-item-who-points-pad">(</span><span class="qa-a-item-who-points-data">280</span><span class="qa-a-item-who-points-pad"> points)</span>
														</span>
													</span>
												</span>
											</span>
											<div class="qa-a-item-buttons">
												</div>
											
											<div class="qa-a-item-c-list" id="c6523_list">
												<div class="qa-c-list-item  hentry comment" id="c6524">
													<div class="qa-c-item-content">
														<a name="6524"></a><div class="entry-content"><p>It worked for the example in <a rel="nofollow" href="https://bitbucket.org/fenics-project/dolfin/issue/208/saving-multiple-functions-to-a-file-gives"></a><a rel="nofollow" href="https://bitbucket.org/fenics-project/dolfin/issue/208/saving-multiple-functions-to-a-file-gives">https://bitbucket.org/fenics-project/dolfin/issue/208/saving-multiple-functions-to-a-file-gives</a>, thanks!</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/tianyikillua" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/72b6ccce5b06f5d0100be95bf9fc8d1c?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6524#c6524" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T13:37:50+0000"></span>Feb 13, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/tianyikillua" class="qa-user-link url nickname">tianyikillua</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">1,620</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c6525">
													<div class="qa-c-item-content">
														<a name="6525"></a><div class="entry-content"><p>Great. Thanks for letting me know. Perhaps this script could become a utility method in <code>dolfin</code> that would be invoked at the end of the simulation when the file is no longer being written.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/allanleal" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/46d25a5e10f40a57f5a0d37e5bc7c5ed?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6525#c6525" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T13:41:32+0000"></span>Feb 13, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/allanleal" class="qa-user-link url nickname">allanleal</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Novice</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">280</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c6526">
													<div class="qa-c-item-content">
														<a name="6526"></a><div class="entry-content"><p>That's a great workaround for now, but I don't think it is a logical long-term solution.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6526#c6526" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-13T13:49:23+0000"></span>Feb 13, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Expert</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c6614">
													<div class="qa-c-item-content">
														<a name="6614"></a><div class="entry-content"><p>Thanks for posting this!  I had the same problem and it worked like a charm.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/david.bernstein" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/74a70f8e1dbc1efdc8843a820bd1b1cc?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6614#c6614" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-25T07:36:36+0000"></span>Feb 25, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/david.bernstein" class="qa-user-link url nickname">david.bernstein</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS User</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">2,000</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
												<div class="qa-c-list-item  hentry comment" id="c6615">
													<div class="qa-c-item-content">
														<a name="6615"></a><div class="entry-content"><p>I'll soon post some changes to the development version that will make this workaround unnecessary.</p>
</div>
													</div>
													<div class="qa-c-item-footer">
														<span class="qa-c-item-avatar-meta">
															<span class="qa-c-item-avatar">
																<a href="../../user/chris_richardson" class="qa-avatar-link"><img src="https://www.gravatar.com/avatar/d779daeb727bcec8f6b2c505810042db?s=20" width="20" height="20" class="qa-avatar-image" alt=""></a>
															</span>
															<span class="qa-c-item-meta">
																<a href="../../6513/time-series-of-many-function-instances-in-a-single-file?show=6615#c6615" class="qa-c-item-what">commented</a>
																<span class="qa-c-item-when">
																	<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2015-02-25T09:10:34+0000"></span>Feb 25, 2015</span></span>
																</span>
																<span class="qa-c-item-who">
																	<span class="qa-c-item-who-pad">by </span>
																	<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/chris_richardson" class="qa-user-link url nickname">chris_richardson</a></span></span>
																	<span class="qa-c-item-who-title">FEniCS Expert</span>
																	<span class="qa-c-item-who-points">
																		<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">31,740</span><span class="qa-c-item-who-points-pad"> points)</span>
																	</span>
																</span>
															</span>
														</span>
														<div class="qa-c-item-buttons">
														</div>
													</div>
													<div class="qa-c-item-clear">
													</div>
												</div> <!-- END qa-c-item -->
											</div> <!-- END qa-c-list -->
											
											<input type="hidden" name="code" value="0-1516468075-750cb05c7e730faaa8f204a3418e9c9f62c0b68c">
											<input type="hidden" name="qa_click" value="">
										</form>
										<div class="qa-c-form">
										</div> <!-- END qa-c-form -->
										
									</div> <!-- END qa-a-item-main -->
									<div class="qa-a-item-clear">
									</div>
								</div> <!-- END qa-a-list-item -->
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>