<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Is there a way to disable the mesh partitioning when run in MPI mode - FEniCS Q&amp;A</title>
		<meta name="description" content="I would like to assemble and solve systems of equations on separate meshes in parallel. I have a code that  ...  run with mpirun -np 4 ... Thanks, Ben">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/9864/is-there-way-disable-the-mesh-partitioning-when-run-mpi-mode">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Is there a way to disable the mesh partitioning when run in MPI mode</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q9864">
								<form method="post" action="../../9864/is-there-way-disable-the-mesh-partitioning-when-run-mpi-mode">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_9864">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+1<span class="votes-up"><span class="value-title" title="1"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> vote</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516468242-5f53f7908562525df6d4639343475b97855d1d65">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../9864/is-there-way-disable-the-mesh-partitioning-when-run-mpi-mode">
										<div class="qa-q-view-content">
											<a name="9864"></a><div class="entry-content"><p>I would like to assemble and solve systems of equations on separate meshes in parallel.  I have a code that reads an externally partitioned mesh and extracts interface marker data and creates FEniCS meshes and meshfunctions marking the interfaces.  I do this in parallel using mpi4py, but when I try to assemble the systems on the separate meshes on each processor, I get "PETSc error code is: 63".  </p>

<p>This is an index out of bounds error, and I think it is coming from FEniCS partitioning the domain on top of my own partitioning.  Is there a way to disable the automatic partitioning that would normally occur when you call UnitSquareMesh(), for example, in a script run with mpirun -np 4 ...</p>

<p>Thanks,<br>
Ben</p>
</div>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../9864/is-there-way-disable-the-mesh-partitioning-when-run-mpi-mode" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2016-04-13T17:50:57+0000"></span>Apr 13, 2016</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/brk888" class="qa-user-link url nickname">brk888</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">990</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" id="c9864_list">
											<div class="qa-c-list-item  hentry comment" id="c9870">
												<div class="qa-c-item-content">
													<a name="9870"></a><div class="entry-content"><p>I believe code for (something like) this just landed in the master branch, see <a rel="nofollow" href="https://bitbucket.org/fenics-project/dolfin/pull-requests/270/various-fixes-for-solving-different-pdes/diff">https://bitbucket.org/fenics-project/dolfin/pull-requests/270/various-fixes-for-solving-different-pdes/diff</a></p>

<p>I am not sure how this would interact with your own mesh partitioning, but it seems that you should be able to use different meshes on different subsets of processors if you let dolfin handle the partitioning...</p>

<p>I am pretty there are few others that the author of the linked pull request that has tested this, so you will probably have to do some investigation to see if it is sufficient for your needs.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-meta">
															<a href="../../9864/is-there-way-disable-the-mesh-partitioning-when-run-mpi-mode?show=9870#c9870" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-04-14T08:11:33+0000"></span>Apr 14, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Tormod+Landet" class="qa-user-link url nickname">Tormod Landet</a></span></span>
																<span class="qa-c-item-who-title">FEniCS User</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">5,130</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516468242-276c3087531397bc38da73219dfed4c6478dc487">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title" style="display:none;"></h2>
							<div class="qa-a-list" id="a_list">
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>