<html><!-- Powered by Question2Answer - http://www.question2answer.org/ --><head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<title>Can cell orientation affect the sign of assembled H(curl) forms? - FEniCS Q&amp;A</title>
		<meta name="description" content="Hello, I have been working on domain decomposition methods using FEniCS to assemble global and local  ...  copied local mesh to match the global mesh.">
		<meta name="keywords" content="cell,mesh,orientation,n1curl,domain-decomposition">
		<link rel="stylesheet" type="text/css" href="../../qa-theme/Snow/qa-styles.css">
		<link rel="canonical" href="http://fenicsproject.org/qa/11652/can-cell-orientation-affect-the-sign-of-assembled-curl-forms">
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
    TeX: { extensions: ["AMSmath.js","AMSsymbols.js"]}
  });
</script>
<script type="text/javascript" src="../../mathjax/MathJax.js"></script>
		<script src="../../jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../../highlight.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.wmd-input').keypress(function(){
		window.clearTimeout(hljs.Timeout);
		hljs.Timeout = window.setTimeout(function() {
			hljs.initHighlighting.called = false;
			hljs.initHighlighting();
		}, 500);
	});
	window.setTimeout(function() {
		hljs.initHighlighting.called = false;
		hljs.initHighlighting();
	}, 500);
});
</script>


	</head>
	<body class="qa-template-question qa-body-js-off">
		<div class="qa-body-wrapper">
			
			<div class="qa-header">
				<div class="qa-logo">
					<a href="../../" class="qa-logo-link" title="FEniCS Q&amp;A"><img src="../../qa-theme/fenics_qa.png" border="0" alt="FEniCS Q&amp;A"></a>
				</div>
				<div class="qa-header-clear">
				</div>
			</div> <!-- END qa-header -->
			
			<div class="qa-main-shadow">
				
				<div class="qa-main-wrapper">
					
					<div class="qa-sidepanel">
						<div class="qa-sidebar">
							This is a read only copy of the old FEniCS QA forum. Please visit the <a href="https://www.allanswered.com/community/s/fenics-project/">new QA forum</a> to ask questions
						</div>
						
					</div>
					
					<div class="qa-main">
						<h1>
							<span class="entry-title">Can cell orientation affect the sign of assembled H(curl) forms?</span>
						</h1>
						<div class="qa-part-q-view">
							<div class="qa-q-view  hentry question" id="q11652">
								<form method="post" action="../../11652/can-cell-orientation-affect-the-sign-of-assembled-curl-forms">
									<div class="qa-q-view-stats">
										<div class="qa-voting qa-voting-net" id="voting_11652">
											<div class="qa-vote-count qa-vote-count-net">
												<span class="qa-netvote-count">
													<span class="qa-netvote-count-data">+2<span class="votes-up"><span class="value-title" title="2"></span></span><span class="votes-down"><span class="value-title" title="0"></span></span></span><span class="qa-netvote-count-pad"> votes</span>
												</span>
											</div>
											<div class="qa-vote-clear">
											</div>
										</div>
									</div>
									<input type="hidden" name="code" value="0-1516467778-e4b7beb448c47d9355177737b24d4df9dd7bfe02">
								</form>
								<div class="qa-q-view-main">
									<form method="post" action="../../11652/can-cell-orientation-affect-the-sign-of-assembled-curl-forms">
										<div class="qa-q-view-content">
											<a name="11652"></a><div class="entry-content"><p>Hello,</p>

<p>I have been working on domain decomposition methods using FEniCS to assemble global and local subdomain problems.  One way to perform the domain decomposition is to copy local portions of a global mesh into separate local meshes, then assemble subdomain problems on those local meshes.</p>

<p>I have noticed that when using 'CG' function spaces for Poisson problems, everything is copacetic.  I can assemble a local subdomain matrix over the local meshes as well as restrict the global matrix into subdomain DOFs, and the resulting matrices are the same.  However, when using H(curl) function spaces, the restricted and the assembled matrices differ in sign at a large number of elements in the matrix.</p>

<p>I am wondering if this could be due to cell/facet/edge orientations somehow.  I know that if I iterate through each mesh and print cell.orientation() that they are indeed different, and I am worried that this is somehow to blame for the sign difference when computing curls and cross-products.</p>

<p>I would appreciate any insight into this, as well as any information about controlling the orientations of the copied local mesh to match the global mesh.</p>
</div>
										</div>
										<div class="qa-q-view-tags">
											<ul class="qa-q-view-tag-list">
												<li class="qa-q-view-tag-item"><a href="../../tag/cell" rel="tag" class="qa-tag-link">cell</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/mesh" rel="tag" class="qa-tag-link">mesh</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/orientation" rel="tag" class="qa-tag-link">orientation</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/n1curl" rel="tag" class="qa-tag-link">n1curl</a></li>
												<li class="qa-q-view-tag-item"><a href="../../tag/domain-decomposition" rel="tag" class="qa-tag-link">domain-decomposition</a></li>
											</ul>
										</div>
										<span class="qa-q-view-avatar-meta">
											<span class="qa-q-view-meta">
												<a href="../../11652/can-cell-orientation-affect-the-sign-of-assembled-curl-forms" class="qa-q-view-what">asked</a>
												<span class="qa-q-view-when">
													<span class="qa-q-view-when-data"><span class="published"><span class="value-title" title="2016-11-16T19:37:10+0000"></span>Nov 16, 2016</span></span>
												</span>
												<span class="qa-q-view-who">
													<span class="qa-q-view-who-pad">by </span>
													<span class="qa-q-view-who-data"><span class="vcard author"><a href="../../user/brk888" class="qa-user-link url nickname">brk888</a></span></span>
													<span class="qa-q-view-who-title">FEniCS Novice</span>
													<span class="qa-q-view-who-points">
														<span class="qa-q-view-who-points-pad">(</span><span class="qa-q-view-who-points-data">990</span><span class="qa-q-view-who-points-pad"> points)</span>
													</span>
												</span>
											</span>
										</span>
										<div class="qa-q-view-buttons">
										</div>
										
										<div class="qa-q-view-c-list" id="c11652_list">
											<div class="qa-c-list-item  hentry comment" id="c11759">
												<div class="qa-c-item-content">
													<a name="11759"></a><div class="entry-content"><p>Ah, I see now why you are interested in manually copying parts of a mesh in you post <a rel="nofollow" href="https://fenicsproject.org/qa/11751/how-can-copy-part-of-mesh-while-preserving-cell-orientations">here</a>.<br>
I think my comment there relating to the behaviour of add_cell explains the behaviour you're seeing here as well.</p>
</div>
												</div>
												<div class="qa-c-item-footer">
													<span class="qa-c-item-avatar-meta">
														<span class="qa-c-item-meta">
															<a href="../../11652/can-cell-orientation-affect-the-sign-of-assembled-curl-forms?show=11759#c11759" class="qa-c-item-what">commented</a>
															<span class="qa-c-item-when">
																<span class="qa-c-item-when-data"><span class="published"><span class="value-title" title="2016-11-25T06:36:58+0000"></span>Nov 25, 2016</span></span>
															</span>
															<span class="qa-c-item-who">
																<span class="qa-c-item-who-pad">by </span>
																<span class="qa-c-item-who-data"><span class="vcard author"><a href="../../user/Brendan" class="qa-user-link url nickname">Brendan</a></span></span>
																<span class="qa-c-item-who-title">FEniCS Novice</span>
																<span class="qa-c-item-who-points">
																	<span class="qa-c-item-who-points-pad">(</span><span class="qa-c-item-who-points-data">890</span><span class="qa-c-item-who-points-pad"> points)</span>
																</span>
															</span>
														</span>
													</span>
													<div class="qa-c-item-buttons">
													</div>
												</div>
												<div class="qa-c-item-clear">
												</div>
											</div> <!-- END qa-c-item -->
										</div> <!-- END qa-c-list -->
										
										<input type="hidden" name="code" value="0-1516467778-0e619f5235f33acaa36021b706b2b18353065012">
										<input type="hidden" name="qa_click" value="">
									</form>
									<div class="qa-c-form">
									</div> <!-- END qa-c-form -->
									
								</div> <!-- END qa-q-view-main -->
								<div class="qa-q-view-clear">
								</div>
							</div> <!-- END qa-q-view -->
							
						</div>
						<div class="qa-part-a-list">
							<h2 id="a_list_title" style="display:none;"></h2>
							<div class="qa-a-list" id="a_list">
								
							</div> <!-- END qa-a-list -->
							
						</div>
					</div> <!-- END qa-main -->
					
				</div> <!-- END main-wrapper -->
			</div> <!-- END main-shadow -->
		</div> <!-- END body-wrapper -->
		<!-- END footer-bottom-group -->
		
		<div style="position:absolute; left:-9999px; top:-9999px;">
			<span id="qa-waiting-template" class="qa-waiting">...</span>
		</div>
	
	

</body><!-- Powered by Question2Answer - http://www.question2answer.org/ --></html>